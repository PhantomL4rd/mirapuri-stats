---
import type { VersatilityItem } from '../lib/queries';

interface Props {
  items: VersatilityItem[];
}

const { items } = Astro.props;

/**
 * Lodestone アイテムURL を生成
 */
function getLodestoneUrl(itemId: string): string {
  return `https://jp.finalfantasyxiv.com/lodestone/playguide/db/item/${itemId}/`;
}
---

<div class="space-y-2">
  {
    items.length === 0 ? (
      <p class="text-center text-muted-foreground py-8">データがありません</p>
    ) : (
      <ol class="space-y-2">
        {items.map((item, index) => (
          <li class="flex items-center gap-3 rounded-lg border border-border bg-card p-3 shadow-sm">
            <span class="flex h-8 w-8 items-center justify-center rounded-full bg-muted text-sm font-bold text-muted-foreground">
              {index + 1}
            </span>
            <div class="flex-1">
              <a
                href={`/item/${item.itemId}`}
                class="font-medium text-card-foreground hover:underline"
              >
                {item.itemName}
              </a>
              <p class="text-sm text-muted-foreground">
                {item.versatilityScore}種類の装備と相性◎
              </p>
            </div>
            <a
              href={getLodestoneUrl(item.itemId)}
              target="_blank"
              rel="noopener noreferrer"
              class="eorzeadb_link text-xs text-muted-foreground hover:text-foreground"
            >
              Lodestone
            </a>
          </li>
        ))}
      </ol>
    )
  }
</div>
