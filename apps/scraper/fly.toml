# Fly.io Machine configuration for mirapuri crawler
#
# Usage (from apps/scraper directory):
#   fly machine run . [-- <args>]
#
# Examples:
#   fly machine run .                        # Tiamat (default)
#   fly machine run . -- --world Bahamut     # Single world
#   fly machine run . -- --dc Gaia           # Full DC (8 worlds)

app = "mirapuri-stats"
primary_region = "nrt"  # Tokyo

[build]
  dockerfile = "Dockerfile"

# Machine resources
# shared-cpu-1x is enough for crawler (it's I/O bound, not CPU bound)
[[vm]]
  size = "shared-cpu-1x"
  memory = "256mb"

[env]
  NODE_ENV = "production"
  # DATABASE_URL should be set via secrets:
  #   fly secrets set DATABASE_URL=postgres://...

# No HTTP services - this is a batch job
# [[services]]
